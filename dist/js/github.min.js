var github={auth:"?client_id=d7125c669427ba3e35c1&client_secret=b0698c55bf1bc5e5a306136d1988bbfa40f851ef",contribsUrl:"",commitsUrl:"",page:"",init:function(){$.ajax({type:"GET",url:"https://api.github.com/users/globocom/repos"+github.auth+"&page=1&per_page=200",dataType:"json",success:function(a){a.sort(function(a,b){return b.stargazers_count-a.stargazers_count});var b=function(){$("#repositories").append("<li class='project-item'><a href='javascript:void(0)' class='project' data-title='"+a[i].name+"' data-stars='"+a[i].stargazers_count+"' data-forks='"+a[i].forks+"' data-contribs-url='"+a[i].contributors_url+"' data-commits-url='"+a[i].commits_url.replace("{/sha}","")+"'>"+a[i].name+"</a><span class='arrow-active'></span></li>")};for(i in a)b()}})},getCommit:function(){var a="";$.ajax({type:"GET",url:github.commitsUrl+github.auth+"&page="+github.page+"&per_page=20",dataType:"json",success:function(b){for(i in b)try{a+="<li class='commit-item js-show'><img class='photo' src='"+b[i].committer.avatar_url+" width='50' height='50'><article class='commit'><div class='outer'><h2 class='commit-title'>"+b[i].commit.message+"</h2><p class='commit-user'>@"+b[i].committer.login+"</p></div></article><time class='commit-date'>"+github.formatCommitDate(b[i].commit.committer.date)+"</time></li>"}catch(c){a+="<li class='commit-item js-show'><img class='photo' src='' width='50' height='50'><article class='commit'><div class='outer'><h2 class='commit-title'>"+b[i].commit.message+"</h2><p class='commit-user'>@</p></div></article><time class='commit-date'>"+github.formatCommitDate(b[i].commit.committer.date)+"</time></li>"}20==b.length?$("#showMore").show():$("#showMore").hide(),$("#commits").append(a),$(".sidebar").height($(document).innerHeight())}}),github.page=github.page+1},getContribs:function(){$.ajax({type:"GET",url:github.contribsUrl+github.auth,dataType:"json",success:function(a){var b=a.length;$("#contribs").text("contribs "+b)}})},formatCommitDate:function(a){function b(a){return 10>a?"0"+a:a}return newDate=new Date(a),[b(newDate.getDate()),b(newDate.getMonth()+1),newDate.getFullYear()].join("/")},showMore:function(){github.getCommit()}};$(document).ready(function(){github.init(),$(document).on("click",".project",function(){var a=$(this).data("stars"),b=$(this).data("forks");$(this).data("title");github.contribsUrl=$(this).data("contribs-url"),github.commitsUrl=$(this).data("commits-url"),github.page=1,$(".project-item").removeClass("active"),$(this).closest(".project-item").addClass("active"),$("#stars").text("stars "+a),$("#forks").text("forks "+b),$(".commit-item").remove(),github.getContribs(),github.getCommit()}),$("#showMore").on("click",github.showMore)});